
================================================================================
ğŸ”§ COMPREHENSIVE SELF-TEST SUITE
================================================================================

ğŸ“ TEST 1: File Operations
----------------------------------------
â†’ Writing test file via FileWriter...
   âœ… Wrote file to: /home/gespitia/projects/anki-ocr-agent/agent_self_test.txt
   ğŸ“ File size: 116 bytes
â†’ Reading test file via FileReader...
   ğŸ“– Read 110 characters
   ğŸ“ Content preview: 'agent self-test: comprehensive check\nLine 2: UTF-8 encoding test: Ã¡Ã©Ã­Ã³Ãº Ã±\nLine 3: timestamp=17553847'...
   âœ… File write/read integrity: PASSED

ğŸ“‚ TEST 2: Directory and File Discovery
----------------------------------------
â†’ Current directory contains 6 files:
   ğŸ“„ .gitignore (553 bytes)
   ğŸ“„ README.md (12790 bytes)
   ğŸ“„ agent_output.txt (0 bytes)
   ğŸ“„ agent_self_test.txt (116 bytes)
   ğŸ“„ anki_cards.csv (89 bytes)
   ğŸ“„ vocab_ocr_agent.py (6455 bytes)
â†’ Input directory 'input' found
   ğŸ“ Contains 1 total files
   ğŸ–¼ï¸  Found 1 image files:
      ğŸ–¼ï¸  vocabulary_page.png (4341616 bytes, 4239.9 KB)

ğŸ“‹ TEST 3: YAML Processing
----------------------------------------
â†’ Testing YAML to Anki conversion...
   ğŸ“ Test YAML (248 chars):
   - word: test
     back: 'A trial or examination ("I took a test", "This is a test case", "Testing is important")'
     tags: noun
   - word: example...
   âœ… Generated CSV: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv
   ğŸ“Š CSV contains 3 lines (including header)
   ğŸ“„ CSV preview: Word,Back,Tags
                   test,"A trial or examination (""I took a test"", ""This is a...

ğŸ–¼ï¸  TEST 4: Image Processing Validation
----------------------------------------
â†’ Target image file found: input/vocabulary_page.png
   ğŸ“ Size: 4341616 bytes (4239.9 KB)
   ğŸ“… Modified: 1754759148.4514978
   ğŸ” File header: ffd8ffe14bdd4578696600004d4d002a...
   âœ… Detected as JPEG image

ğŸ“ TEST 5: YAML Syntax Validation
----------------------------------------
â†’ Testing YAML with embedded quotes...
   âœ… Successfully processed YAML with quotes: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv

ğŸ‘ï¸  TEST 6: Vision Model Capabilities
----------------------------------------
â†’ Testing PIL and image loading...
   âœ… PIL successfully loaded image: (4032, 2268) RGB
   âœ… Image conversion successful: 11757642 bytes

================================================================================
ğŸ SELF-TEST COMPLETE
================================================================================

ğŸ–¼ï¸  Processing image: input/vocabulary_page.png
ğŸ¤– Creating vocabulary processing agent...
Local tool instances: ['yaml_to_anki', 'file_reader', 'file_writer']
Agent created. Tools reported by agent (best-effort):
['yaml_to_anki', 'file_reader', 'file_writer', 'final_answer']
ğŸ“– Loading image file: input/vocabulary_page.png
âœ… Image loaded: (4032, 2268) pixels, mode: RGB

ğŸš€ Starting agent execution with vision...
ğŸ“Š Using smolagents native image support...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ New run â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                                                                                                            â”‚
â”‚ Analyze this vocabulary image and extract real vocabulary words, definitions, and examples.                                                                                â”‚
â”‚                                                                                                                                                                            â”‚
â”‚ CRITICAL: Extract ONLY what you actually see in the image. DO NOT generate placeholder content like 'word1', 'word2', 'definition1'.                                       â”‚
â”‚                                                                                                                                                                            â”‚
â”‚ Format as YAML:                                                                                                                                                            â”‚
â”‚ - word: [actual word\]                                                                                                                                                     â”‚
â”‚   back: '[real definition\] ("[real example 1\]", "[real example 2\]")'                                                                                                    â”‚
â”‚   tags: [part of speech\]                                                                                                                                                  â”‚
â”‚                                                                                                                                                                            â”‚
â”‚ Then call yaml_to_anki(yaml_content) with your extracted YAML.                                                                                                             â”‚
â”‚                                                                                                                                                                            â”‚
â•°â”€ LiteLLMModel - ollama/qwen2.5vl:latest â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 1 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 â”€ Executing parsed code: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
  import re                                                                                                                                                                  
                                                                                                                                                                             
  yaml_content = """                                                                                                                                                         
  - word: Whether                                                                                                                                                            
    back: 'yes - to be - ought'                                                                                                                                              
    tags: [adverb]                                                                                                                                                           
                                                                                                                                                                             
  - word: earnest                                                                                                                                                            
    back: 'honest - sincere'                                                                                                                                                 
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: wit                                                                                                                                                                
    back: 'humor - clever'                                                                                                                                                   
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: Spitting                                                                                                                                                           
    back: 'exhale - expel'                                                                                                                                                   
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: engine                                                                                                                                                             
    back: 'motor - engine'                                                                                                                                                   
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: general                                                                                                                                                            
    back: 'common - widespread'                                                                                                                                              
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: acquired                                                                                                                                                           
    back: 'learned - obtained'                                                                                                                                               
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: crumb                                                                                                                                                              
    back: 'small - tiny'                                                                                                                                                     
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: lattice                                                                                                                                                            
    back: 'net - grid'                                                                                                                                                       
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: Qt                                                                                                                                                                 
    back: 'Sorcerer - wizard'                                                                                                                                                
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: strong                                                                                                                                                             
    back: 'deep - forceful'                                                                                                                                                  
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: light-hearted                                                                                                                                                      
    back: 'cheerful - playful'                                                                                                                                               
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: scions                                                                                                                                                             
    back: 'sons - offspring'                                                                                                                                                 
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: control                                                                                                                                                            
    back: 'command - govern'                                                                                                                                                 
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: stack                                                                                                                                                              
    back: 'pile - mount'                                                                                                                                                     
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: accent                                                                                                                                                             
    back: 'taste - flavor'                                                                                                                                                   
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: quail                                                                                                                                                              
    back: 'Coturnix - bird'                                                                                                                                                  
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: flows                                                                                                                                                              
    back: 'hike - fiber'                                                                                                                                                     
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: steadily                                                                                                                                                           
    back: 'slowly - consistently'                                                                                                                                            
    tags: [adverb]                                                                                                                                                           
                                                                                                                                                                             
  - word: Fenian                                                                                                                                                             
    back: 'Demagogue - leader'                                                                                                                                               
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: loomed                                                                                                                                                             
    back: 'tower - loom'                                                                                                                                                     
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: thickly                                                                                                                                                            
    back: 'dense - thick'                                                                                                                                                    
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: fencing                                                                                                                                                            
    back: 'sword - swordplay'                                                                                                                                                
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: drogged                                                                                                                                                            
    back: 'clad - clad'                                                                                                                                                      
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: cockslate                                                                                                                                                          
    back: 'moral - moral'                                                                                                                                                    
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: slinky                                                                                                                                                             
    back: 'agile - flexible'                                                                                                                                                 
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: nimblly                                                                                                                                                            
    back: 'agile - flexible'                                                                                                                                                 
    tags: [adverb]                                                                                                                                                           
                                                                                                                                                                             
  - word: shawl                                                                                                                                                              
    back: 'chief - mantle'                                                                                                                                                   
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: cylinder                                                                                                                                                           
    back: 'long - tube'                                                                                                                                                      
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: full                                                                                                                                                               
    back: 'large - entire'                                                                                                                                                   
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: bearded                                                                                                                                                            
    back: 'hair - beard'                                                                                                                                                     
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: subdued                                                                                                                                                            
    back: 'forced - subdued'                                                                                                                                                 
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: dill-witted                                                                                                                                                        
    back: 'foolish - dill-witted'                                                                                                                                            
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: gull-like                                                                                                                                                          
    back: 'causal - gull-like'                                                                                                                                               
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: sharp                                                                                                                                                              
    back: 'pointed - sharp'                                                                                                                                                  
    tags: [adjective]                                                                                                                                                        
                                                                                                                                                                             
  - word: clyde                                                                                                                                                              
    back: 'ceiling - clyde'                                                                                                                                                  
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: w:be                                                                                                                                                               
    back: 'example - be'                                                                                                                                                     
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: beards                                                                                                                                                             
    back: 'hair - beard'                                                                                                                                                     
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: scatters                                                                                                                                                           
    back: 'expanding - scatters'                                                                                                                                             
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: narrowed                                                                                                                                                           
    back: 'narrowed - narrowed'                                                                                                                                              
    tags: [verb]                                                                                                                                                             
                                                                                                                                                                             
  - word: unevenness                                                                                                                                                         
    back: 'irregular - unevenness'                                                                                                                                           
    tags: [noun]                                                                                                                                                             
                                                                                                                                                                             
  - word: Stanley                                                                                                                                                            
    back: 'Fluoride - fluoride'                                                                                                                                              
    tags: [noun]                                                                                                                                                             
  """                                                                                                                                                                        
                                                                                                                                                                             
  yaml_to_anki(yaml_content)                                                                                                                                                 
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
Out: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv
[Step 1: Duration 183.38 seconds| Input tokens: 3,473 | Output tokens: 956]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 2 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 â”€ Executing parsed code: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
  yaml_to_anki(yaml_content)                                                                                                                                                 
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
Out: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv
[Step 2: Duration 215.72 seconds| Input tokens: 10,284 | Output tokens: 1,013]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 3 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Error in code parsing:
Your code snippet is invalid, because the regex pattern <code>(.*?)</code> was not found in it.
            Here is your code snippet:
            Thought: The YAML content has been successfully converted into an Anki-ready CSV file. The task is complete.

Final Answer:
The task is complete. The vocabulary has been extracted and formatted into an Anki-ready CSV file.</code>
            Make sure to include code with the correct pattern, for instance:
            Thoughts: Your thoughts
            <code>
            # Your python code here
            </code>
Make sure to provide correct code blobs.
[Step 3: Duration 190.92 seconds| Input tokens: 18,463 | Output tokens: 1,059]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 4 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
