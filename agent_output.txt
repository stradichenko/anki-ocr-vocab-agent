
================================================================================
ğŸ”§ COMPREHENSIVE SELF-TEST SUITE
================================================================================

ğŸ“ TEST 1: File Operations
----------------------------------------
â†’ Writing test file via FileWriter...
   âœ… Wrote file to: /home/gespitia/projects/anki-ocr-agent/agent_self_test.txt
   ğŸ“ File size: 116 bytes
â†’ Reading test file via FileReader...
   ğŸ“– Read 110 characters
   ğŸ“ Content preview: 'agent self-test: comprehensive check\nLine 2: UTF-8 encoding test: Ã¡Ã©Ã­Ã³Ãº Ã±\nLine 3: timestamp=17554372'...
   âœ… File write/read integrity: PASSED

ğŸ“‚ TEST 2: Directory and File Discovery
----------------------------------------
â†’ Current directory contains 6 files:
   ğŸ“„ .gitignore (553 bytes)
   ğŸ“„ README.md (12790 bytes)
   ğŸ“„ agent_output.txt (0 bytes)
   ğŸ“„ agent_self_test.txt (116 bytes)
   ğŸ“„ anki_cards.csv (89 bytes)
   ğŸ“„ vocab_ocr_agent.py (4535 bytes)
â†’ Input directory 'input' found
   ğŸ“ Contains 1 total files
   ğŸ–¼ï¸  Found 1 image files:
      ğŸ–¼ï¸  vocabulary_page.png (4341616 bytes, 4239.9 KB)

ğŸ“‹ TEST 3: YAML Processing
----------------------------------------
â†’ Testing YAML to Anki conversion...
   ğŸ“ Test YAML (248 chars):
   - word: test
     back: 'A trial or examination ("I took a test", "This is a test case", "Testing is important")'
     tags: noun
   - word: example...
   âœ… Generated CSV: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv
   ğŸ“Š CSV contains 3 lines (including header)
   ğŸ“„ CSV preview: Word,Back,Tags
                   test,"A trial or examination (""I took a test"", ""This is a...

ğŸ–¼ï¸  TEST 4: Image Processing Validation
----------------------------------------
â†’ Target image file found: input/vocabulary_page.png
   ğŸ“ Size: 4341616 bytes (4239.9 KB)
   ğŸ“… Modified: 1754759148.4514978
   ğŸ” File header: ffd8ffe14bdd4578696600004d4d002a...
   âœ… Detected as JPEG image

ğŸ“ TEST 5: YAML Syntax Validation
----------------------------------------
â†’ Testing YAML with embedded quotes...
   âœ… Successfully processed YAML with quotes: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv

ğŸ‘ï¸  TEST 6: Vision Model Capabilities
----------------------------------------
â†’ Testing PIL and image loading...
   âœ… PIL successfully loaded image: (4032, 2268) RGB
   âœ… Image conversion successful: 11757642 bytes

================================================================================
ğŸ SELF-TEST COMPLETE
================================================================================

ğŸ–¼ï¸  Processing image: input/vocabulary_page.png
ğŸ¤– Creating vocabulary processing agent...
Local tool instances: ['yaml_to_anki', 'file_reader', 'file_writer']
Agent created. Tools reported by agent (best-effort):
['yaml_to_anki', 'file_reader', 'file_writer', 'final_answer']
ğŸ“– Loading image file: input/vocabulary_page.png
âœ… Image loaded: (4032, 2268) pixels, mode: RGB

ğŸš€ Starting agent execution with vision...
ğŸ“Š Using smolagents native image support...
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ New run â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                                                                                    â”‚
â”‚ Analyze this vocabulary image and extract real vocabulary words, definitions, and  â”‚
â”‚ examples.                                                                          â”‚
â”‚                                                                                    â”‚
â”‚ CRITICAL: Extract ONLY what you actually see in the image and do it only once. If  â”‚
â”‚ the word is repeated, skip it.DO NOT generate placeholder content like 'word1',    â”‚
â”‚ 'word2', 'definition1'.                                                            â”‚
â”‚                                                                                    â”‚
â”‚ Format as YAML:                                                                    â”‚
â”‚ - word: [actual word\]                                                             â”‚
â”‚   back: '[real definition\] ("[real example 1\]", "[real example 2\]")'            â”‚
â”‚   tags: [part of speech\]                                                          â”‚
â”‚                                                                                    â”‚
â”‚ Then call yaml_to_anki(yaml_content) with your extracted YAML.                     â”‚
â”‚                                                                                    â”‚
â•°â”€ LiteLLMModel - ollama/qwen2.5vl:latest â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 1 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 â”€ Executing parsed code: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
  yaml_content = """                                                                  
  - word: Whether                                                                     
    back: 'yes - no - sincere ("yes", "no")'                                          
    tags: [adverb]                                                                    
                                                                                      
  - word: wit                                                                         
    back: 'humor - intelligence - cleverness ("humor", "intelligence")'               
    tags: [noun]                                                                      
                                                                                      
  - word: Spitting                                                                    
    back: 'exhale - breathe out - expel ("exhale", "breathe out")'                    
    tags: [verb]                                                                      
                                                                                      
  - word: engine                                                                      
    back: 'motor - generator - power ("motor", "generator")'                          
    tags: [noun]                                                                      
                                                                                      
  - word: general                                                                     
    back: 'common - widespread - universal ("common", "widespread")'                  
    tags: [adjective]                                                                 
                                                                                      
  - word: acquired                                                                    
    back: 'learned - obtained - gained ("learned", "obtained")'                       
    tags: [verb]                                                                      
                                                                                      
  - word: crumb                                                                       
    back: 'small piece of food - fragment - scrap ("small piece of food",             
  "fragment")'                                                                        
    tags: [noun]                                                                      
                                                                                      
  - word: lattice                                                                     
    back: 'grid - mesh - framework ("grid", "mesh")'                                  
    tags: [noun]                                                                      
                                                                                      
  - word: Qt                                                                          
    back: 'open-source software - framework - application ("open-source software",    
  "framework")'                                                                       
    tags: [noun]                                                                      
                                                                                      
  - word: strong                                                                      
    back: 'powerful - forceful - robust ("powerful", "forceful")'                     
    tags: [adjective]                                                                 
                                                                                      
  - word: light-hearted                                                               
    back: 'cheerful - playful - carefree ("cheerful", "playful")'                     
    tags: [adjective]                                                                 
                                                                                      
  - word: scions                                                                      
    back: 'sons - offspring - descendants ("sons", "offspring")'                      
    tags: [noun]                                                                      
                                                                                      
  - word: control                                                                     
    back: 'command - regulate - govern ("command", "regulate")'                       
    tags: [verb]                                                                      
                                                                                      
  - word: stack                                                                       
    back: 'pile - heap - collection ("pile", "heap")'                                 
    tags: [noun]                                                                      
                                                                                      
  - word: accent                                                                      
    back: 'intonation - emphasis - stress ("intonation", "emphasis")'                 
    tags: [noun]                                                                      
                                                                                      
  - word: quail                                                                       
    back: 'bird - game bird - partridge ("bird", "game bird")'                        
    tags: [noun]                                                                      
                                                                                      
  - word: flows                                                                       
    back: 'stream - current - water ("stream", "current")'                            
    tags: [verb]                                                                      
                                                                                      
  - word: steadily                                                                    
    back: 'slowly - gradually - consistently ("slowly", "gradually")'                 
    tags: [adverb]                                                                    
                                                                                      
  - word: fan                                                                         
    back: 'air mover - blower - ventilator ("air mover", "blower")'                   
    tags: [noun]                                                                      
                                                                                      
  - word: loosed                                                                      
    back: 'released - freed - untied ("released", "freed")'                           
    tags: [verb]                                                                      
                                                                                      
  - word: gathered                                                                    
    back: 'collected - assembled - brought together ("collected", "assembled")'       
    tags: [verb]                                                                      
                                                                                      
  - word: thickly                                                                     
    back: 'dense - heavy - compact ("dense", "heavy")'                                
    tags: [adverb]                                                                    
                                                                                      
  - word: fencing                                                                     
    back: 'sport - martial art - combat ("sport", "martial art")'                     
    tags: [noun]                                                                      
                                                                                      
  - word: drogged                                                                     
    back: 'tied - fastened - secured ("tied", "fastened")'                            
    tags: [verb]                                                                      
                                                                                      
  - word: cocktail                                                                    
    back: 'mixed drink - alcoholic beverage - drink ("mixed drink", "alcoholic        
  beverage")'                                                                         
    tags: [noun]                                                                      
                                                                                      
  - word: slinky                                                                      
    back: 'flexible - pliable - bendy ("flexible", "pliable")'                        
    tags: [adjective]                                                                 
                                                                                      
  - word: spang                                                                       
    back: 'sail - cloth - fabric ("sail", "cloth")'                                   
    tags: [noun]                                                                      
                                                                                      
  - word: nimblly                                                                     
    back: 'flexible - agile - quick ("flexible", "agile")'                            
    tags: [adverb]                                                                    
                                                                                      
  - word: woody                                                                       
    back: 'wood - timber - bark ("wood", "timber")'                                   
    tags: [adjective]                                                                 
                                                                                      
  - word: shawl                                                                       
    back: 'garment - wrap - cover ("garment", "wrap")'                                
    tags: [noun]                                                                      
                                                                                      
  - word: cylinder                                                                    
    back: 'cylindrical shape - tube - pipe ("cylindrical shape", "tube")'             
    tags: [noun]                                                                      
                                                                                      
  - word: full                                                                        
    back: 'complete - entire - whole ("complete", "entire")'                          
    tags: [adjective]                                                                 
                                                                                      
  - word: beppeched                                                                   
    back: 'bent - curved - twisted ("bent", "curved")'                                
    tags: [verb]                                                                      
                                                                                      
  - word: subdued                                                                     
    back: 'calmed - pacified - quieted ("calmed", "pacified")'                        
    tags: [verb]                                                                      
                                                                                      
  - word: dill-witted                                                                 
    back: 'foolish - silly - stupid ("foolish", "silly")'                             
    tags: [adjective]                                                                 
                                                                                      
  - word: gull-like                                                                   
    back: 'seagull - bird - aquatic ("seagull", "bird")'                              
    tags: [adjective]                                                                 
                                                                                      
  - word: sharp                                                                       
    back: 'pointed - acute - keen ("pointed", "acute")'                               
    tags: [adjective]                                                                 
                                                                                      
  - word: clay                                                                        
    back: 'clay - soil - mud ("clay", "soil")'                                        
    tags: [noun]                                                                      
                                                                                      
  - word: w:be                                                                        
    back: 'bend - curve - flex ("bend", "curve")'                                     
    tags: [verb]                                                                      
                                                                                      
  - word: bender                                                                      
    back: 'bend - curve - flex ("bend", "curve")'                                     
    tags: [noun]                                                                      
                                                                                      
  - word: scattering                                                                  
    back: 'dispersion - distribution - spread ("dispersion", "distribution")'         
    tags: [noun]                                                                      
                                                                                      
  - word: narrowed                                                                    
    back: 'became narrower - constricted - reduced ("became narrower",                
  "constricted")'                                                                     
    tags: [verb]                                                                      
                                                                                      
  - word: unevenness                                                                  
    back: 'irregularity - lack of smoothness - roughness ("irregularity", "lack of    
  smoothness")'                                                                       
    tags: [noun]                                                                      
                                                                                      
  - word: steady                                                                      
    back: 'firm - stable - solid ("firm", "stable")'                                  
    tags: [adjective]                                                                 
  """                                                                                 
                                                                                      
  yaml_to_anki(yaml_content)                                                          
 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 
Out: /home/gespitia/projects/anki-ocr-agent/anki_cards.csv
[Step 1: Duration 235.75 seconds| Input tokens: 3,486 | Output tokens: 1,460]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 2 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Error in code parsing:
Your code snippet is invalid, because the regex pattern <code>(.*?)</code> was not 
found in it.
Here is your code snippet:
The YAML content has been successfully converted into an Anki-ready CSV file. The 
vocabulary words, definitions, and examples have been extracted and formatted 
correctly. The task is now complete.</code>
Make sure to include code with the correct pattern, for instance:
Thoughts: Your thoughts
<code>
# Your python code here
</code>
Make sure to provide correct code blobs.
[Step 2: Duration 177.73 seconds| Input tokens: 11,292 | Output tokens: 1,497]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” Step 3 â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
